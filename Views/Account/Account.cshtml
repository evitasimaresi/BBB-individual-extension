@model BBB.Models.EditAccountModel
@{
    ViewData["Title"] = "Account Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<main class="account-page" style="padding: var(--padding-md);">
    <section class="user-info-container">
        <header>
            <h2 class="user-info-title">User Information</h2>
        </header>

        <article>
            <p><strong>Username:</strong> @Model.Username</p>
            <p><strong>Email:</strong> @Model.Email</p>
            <p><strong>Number of Borrowed Games:</strong> @Model.BorrowedCount</p>
        </article>

        <footer class="user-info-footer">
            <button id="editToggleBtn" class="button button-primary" type="button">Edit</button>
        </footer>
    </section>


    <section id="editFormSection" class="edit-section" style="display:none;">
        <header class="borrowed-title">
            <h3>Edit User Information</h3>
        </header>
        <div id="successAlert" class="alert-success"></div>
        <div id="errorAlert" class="alert-danger"></div>
        <form id="editForm">
            <fieldset style="border: none; padding: 0;">
                <label for="Username">Username</label>
                <input id="Username" name="Username" type="text" placeholder="New Username" required />

                <label for="Email">Email</label>
                <input id="Email" name="Email" type="email" value="@Model.Email" disabled
                    style="background:var(--blue-300);" />

                <label for=" NewPassword">New Password</label>
                <div class="password-wrapper">
                    <input id="NewPassword" name="NewPassword" type="password"
                        placeholder="Leave blank to keep current" />
                    <button type="button" class="eye-btn" data-target="#NewPassword"
                        aria-label="Show or hide password"></button>
                </div>

                <label for="ConfirmPassword">Confirm New Password</label>
                <div class="password-wrapper">
                    <input id="ConfirmPassword" name="ConfirmPassword" type="password"
                        placeholder="Repeat new password" />
                    <button type="button" class="eye-btn" data-target="#ConfirmPassword"
                        aria-label="Show or hide password"></button>
                </div>

                <div id="passwordRuleMsg" style="margin-top:4px; font-size:14px;"></div>

                <footer class="form-actions">
                    <button class="button button-primary" type="submit">Save</button>
                    <button id="cancelEditBtn" class="button button-primary" type="button">Cancel</button>
                </footer>
            </fieldset>
        </form>
    </section>

    <section class="borrowed-games" style="margin-top: 32px;">
        <header>
            <h2 class="borrowed-title">Games You Requested or Borrowed</h2>
        </header>

        <ul class="scrolloverflow">
        </ul>
    </section>
</main>

<script type="module" src="~/js/apiClient.js"></script>
<script type="module" src="~/js/services.js"></script>
<script type="module" src="~/js/account.js"></script>
<script type="module" src="~/js/renderUserBoardGames.js"></script>