@model List<BBB.Models.TagGroup>
@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var statuses = ViewBag.Statuses as List<BBB.Models.Status>;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google's API for icons and fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">
    <!-- Custom css -->

    <title>BBB</title>
    <link rel="icon" type="image/x-icon" href="~/Images/logo.png">
</head>

<body>
    <main id="main-content">
        <form role="search" class="searchbar" id="game-search-form">
            <input type="text" id="game-search-input" placeholder="Search" />
            <button type="submit">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                    <path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z" />
                </svg>
            </button>
        </form>
        
        <section id="indexmain">
            <section class="filters-container">
                <form class="filters-form">
                    <!-- Status Filter -->
                    <div class="filter-group">
                        <button type="button" class="filter-toggle" data-filter="status">
                            <span>Status</span>
                            <span class="filter-icon">+</span>
                        </button>
                        <div class="filter-content" id="status">
                            @if (statuses != null)
                            {
                                @foreach (var status in statuses)
                                {
                                    <label class="filter-option">
                                        <input type="checkbox" name="status" value="@status.Id" data-status="@status.Id">
                                        <span class="checkmark"></span>
                                        @status.Name
                                    </label>
                                }
                            }
                        </div>
                    </div>
                    @foreach (var group in Model)
                    {
                        <div class="filter-group">
                            <button type="button" class="filter-toggle"
                                data-filter="@group.Name.ToLower().Replace(" ", "")">
                                <span>@group.Name</span>
                                <span class="filter-icon">+</span>
                            </button>
                            <div class="filter-content" id="@group.Name.ToLower().Replace(" ", "")">
                                @foreach (var tag in group.Tags.OrderBy(t => t.Name))
                                {
                                    <label class="filter-option">
                                        <input type="checkbox" name="@group.Name.ToLower().Replace(" ", "")" value="@tag.Id"
                                            data-group="@group.Id">
                                        <span class="checkmark"></span>
                                        @tag.Name
                                    </label>
                                }
                            </div>
                        </div>
                    }
                </form>
            </section>

            <nav class="scroll-container">
                <ul class="scrolloverflow">

                </ul>
            </nav>
        </section>

    </main>

    @* I bet there's a better way to do this than copying the game form again - how do I do this? *@

    <dialog id="editGame">

        <!-- Editing Form -->
        <form class="game-edit-form" method="post" action="@Url.Action("EditGame", "Admin")"
            enctype="multipart/form-data">
            <!--why do I need hidden gam ID?-->
            <input type="hidden" id="gameId" name="Id" />

            <section>
                <label for="gameTitle" style="display:block; font-weight:bold; margin-bottom:5px;">Game Title</label>
                <input type="text" id="gameTitle" name="gameTitle" required>
            </section>

            <section>
                <label for="gameCover" style="display:block; font-weight:bold; margin-bottom:5px;">Game Cover</label>
                <input type="file" id="gameCover" name="gameCover" accept="image/*">
            </section>

            <section>
                <label for="gameDesc" style="display:block; font-weight:bold; margin-bottom:5px;">Description</label>
                <textarea id="gameDesc" name="gameDesc" rows="4"></textarea>
            </section>

            <button id="button-delete" type="button">Delete</button>
            <button id="button-cancel" type="button">Cancel</button>
            <button id="button-save" type="submit">Save</button>

        </form>
    </dialog>

    <script>const allowEdit = @(ViewBag.IsAdmin ? "true" : "false");</script>
    <script src="~/js/renderBoardGames.js"></script>

</body>

</html>